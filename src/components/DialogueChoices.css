/* Dialogue Choices Component - Player response options */
/* Requirements: 6.2, 6.6, 12.1, 12.2 */

.dialogue-choices {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 1rem;
  padding: 1rem;
  background: var(--theme-glass-bg, rgba(0, 0, 0, 0.3));
  border-radius: 12px;
  border: 1px solid var(--theme-glass-border, rgba(255, 255, 255, 0.1));
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

/* Theme-specific styling */
.dialogue-choices--cute {
  background: var(--theme-hover-bg, rgba(232, 213, 242, 0.2));
  border-color: var(--theme-glass-border, rgba(255, 183, 217, 0.3));
}

.dialogue-choices--horror {
  background: var(--theme-hover-bg, rgba(139, 0, 0, 0.2));
  border-color: var(--theme-glass-border, rgba(233, 69, 96, 0.3));
}

/* Countdown timer (Requirement 6.5) */
.choice-timeout {
  text-align: center;
  font-size: 0.875rem;
  color: var(--theme-text-secondary, rgba(255, 255, 255, 0.7));
  font-family: 'VT323', monospace;
  padding: 0.25rem;
  border-bottom: 1px solid var(--theme-glass-border, rgba(255, 255, 255, 0.1));
  margin-bottom: 0.5rem;
}

.dialogue-choices--cute .choice-timeout {
  color: var(--theme-text-secondary, #666);
}

/* Choice buttons container (Requirement 6.6) */
.choice-buttons {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

/* Individual choice button (Requirements 6.2, 12.1, 12.2) */
.dialogue-choice-button {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.5rem;
  padding: 1rem;
  border: 2px solid var(--theme-border, rgba(255, 255, 255, 0.2));
  border-radius: 8px;
  background: var(--theme-background, rgba(0, 0, 0, 0.5));
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
  font-family: 'VT323', monospace;
  font-size: 1.1rem;
  color: var(--theme-text, #fff);
}

.dialogue-choice-button:hover:not(.disabled) {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  border-color: var(--theme-primary, var(--retro-accent));
}

.dialogue-choice-button:focus {
  outline: 2px solid var(--theme-primary, var(--retro-accent));
  outline-offset: 2px;
}

/* Selected state (Requirement 6.3) */
.dialogue-choice-button.selected {
  border-color: var(--theme-primary, var(--retro-accent));
  background: var(--theme-active-bg, rgba(0, 255, 0, 0.2));
  transform: scale(1.02);
}

/* Disabled state */
.dialogue-choice-button.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* Tone-specific colors */
.dialogue-choice-button.choice-tone-comforting {
  border-color: rgba(92, 184, 92, 0.5);
}

.dialogue-choice-button.choice-tone-comforting:hover:not(.disabled) {
  border-color: rgba(92, 184, 92, 1);
  background: rgba(92, 184, 92, 0.1);
}

.dialogue-choice-button.choice-tone-fearful {
  border-color: rgba(217, 83, 79, 0.5);
}

.dialogue-choice-button.choice-tone-fearful:hover:not(.disabled) {
  border-color: rgba(217, 83, 79, 1);
  background: rgba(217, 83, 79, 0.1);
}

.dialogue-choice-button.choice-tone-loving {
  border-color: rgba(232, 90, 156, 0.5);
}

.dialogue-choice-button.choice-tone-loving:hover:not(.disabled) {
  border-color: rgba(232, 90, 156, 1);
  background: rgba(232, 90, 156, 0.1);
}

.dialogue-choice-button.choice-tone-neutral {
  border-color: rgba(128, 128, 128, 0.5);
}

.dialogue-choice-button.choice-tone-neutral:hover:not(.disabled) {
  border-color: rgba(128, 128, 128, 1);
  background: rgba(128, 128, 128, 0.1);
}

/* Tone indicator emoji */
.choice-tone-indicator {
  font-size: 1.5rem;
  line-height: 1;
}

/* Choice text */
.choice-text {
  flex: 1;
  font-size: 1.1rem;
  line-height: 1.4;
}

/* Stat delta preview */
.choice-stats {
  display: flex;
  gap: 0.5rem;
  font-size: 0.85rem;
  opacity: 0.8;
}

.stat-delta {
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-family: 'Press Start 2P', cursive;
  font-size: 0.6rem;
}

.stat-delta.positive {
  color: var(--theme-success, #5CB85C);
  background: rgba(92, 184, 92, 0.2);
}

.stat-delta.negative {
  color: var(--theme-danger, #D9534F);
  background: rgba(217, 83, 79, 0.2);
}

/* Screen reader only content (Requirements 12.3, 12.4, 12.5) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Mobile responsive (Requirement 6.6, 12.2) */
@media (max-width: 768px) {
  .dialogue-choices {
    padding: 0.75rem;
    /* Optimize for touch scrolling */
    -webkit-overflow-scrolling: touch;
  }

  .choice-buttons {
    gap: 0.5rem;
    /* Stacked layout for mobile */
    flex-direction: column;
  }

  .dialogue-choice-button {
    padding: 0.75rem;
    font-size: 1rem;
    /* Full-width buttons with larger touch targets - minimum 44px */
    width: 100%;
    min-height: 60px;
    /* Reduced animations for mobile performance */
    transition: transform 0.1s ease, box-shadow 0.1s ease;
  }

  .dialogue-choice-button:hover:not(.disabled) {
    /* Simplified hover effect for touch devices */
    transform: scale(1.02);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  .choice-tone-indicator {
    font-size: 1.25rem;
  }

  .choice-text {
    font-size: 1rem;
    line-height: 1.3;
  }

  .choice-stats {
    font-size: 0.75rem;
    flex-wrap: wrap;
  }

  .stat-delta {
    font-size: 0.5rem;
    padding: 0.2rem 0.4rem;
  }

  .choice-timeout {
    font-size: 0.8rem;
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  .dialogue-choice-button {
    /* Remove hover effects on touch devices */
    transition: none;
  }

  .dialogue-choice-button:hover:not(.disabled) {
    transform: none;
    box-shadow: none;
  }

  .dialogue-choice-button:active:not(.disabled) {
    /* Provide tactile feedback on tap */
    transform: scale(0.98);
    opacity: 0.9;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .dialogue-choice-button {
    transition: none !important;
  }

  .dialogue-choice-button:hover:not(.disabled) {
    transform: none !important;
  }

  .dialogue-choice-button.selected {
    transform: none !important;
  }
}

/* Cute theme overrides */
.dialogue-choices--cute .dialogue-choice-button {
  background: var(--theme-background-secondary, rgba(74, 74, 74, 0.15));
  color: var(--theme-text, #2D2D3A);
}

.dialogue-choices--cute .dialogue-choice-button.selected {
  background: var(--theme-active-bg, rgba(232, 90, 156, 0.2));
}

/* Horror theme overrides */
.dialogue-choices--horror .dialogue-choice-button {
  background: var(--theme-background-secondary, rgba(13, 13, 13, 0.5));
  color: var(--theme-text, #E8E4EC);
}

.dialogue-choices--horror .dialogue-choice-button.selected {
  background: var(--theme-active-bg, rgba(57, 255, 20, 0.2));
}
